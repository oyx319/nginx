server {
        listen 80;
        server_name dev.kp-para.cn;
        #add_header 'X-Frame-Options' 'ALLOW-FROM https://emscripten.keepwork.com;http://emscripten.keepwork.com;SAMEORIGIN';
	proxy_http_version 1.1;
        if ($http_user_agent ~* (Wget) ) {
           return 403;
        }
        if ($http_user_agent ~* LWP::Simple|BBBike|wget) {
           return 403;
        }

        location ^~ /board/ {
                proxy_pass http://58.251.134.117:30936/board/;
                include proxy_params;
        }
        location ^~ /public/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location / {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
}
server{
        listen 80;
        listen 443;

        server_name api-dev.kp-para.cn;
        access_log /var/log/nginx/access/dev.kp-para_cn.log access;
        client_max_body_size 200m;
	proxy_http_version 1.1;

        ssl_certificate /etc/nginx/ssl/api-dev.kp-para.cn_nginx/api-dev.kp-para.cn_bundle.crt;
        ssl_certificate_key /etc/nginx/ssl/api-dev.kp-para.cn_nginx/api-dev.kp-para.cn.key;

        location ^~ /es/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /core/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /lessonapi/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /marshal/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /sensi/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /gosys/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /accounting/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /kpdataware/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /event-gateway/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /ts-storage/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /push-manage/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /push-server/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /online-quiz/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /delay-service/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /hook-center/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /version-control/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /nginx/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /git-dev/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /edu/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /lesson-center/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
        location ^~ /client-marketing/ {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }

}
# push-server
upstream push_server_backend1{
        #server 58.251.134.117:8000 weight=10;
        server 58.251.134.117:30137 weight=10;
}

server{
        listen 80;
        server_name socket-dev.kp-para.cn;
        access_log /var/log/nginx/access/access-socket-dev.log access;
        proxy_http_version 1.1;
        location ^~ / {
                include proxy_params;
                proxy_set_header Upgrade $http_upgrade;
                proxy_set_header Connection "upgrade";
                 proxy_http_version 1.1;
                 proxy_set_header Connection "";
                 proxy_pass http://push_server_backend1;
        }
}

server{
        listen 80;
        server_name dashboard-dev.kp-para.cn;
        access_log /var/log/nginx/access/a-dashboard-dev.log access;
	proxy_http_version 1.1;
        location / {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
}
server{
        listen 80;
        server_name dashboard2-dev.kp-para.cn;
        access_log /var/log/nginx/access/a-dashboard2-dev.log access;
        proxy_http_version 1.1;
        location / {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
}

server{
        listen 80;
        server_name edu-dev.kp-para.cn;
        access_log /var/log/nginx/access/edu-dev.log access;
        proxy_http_version 1.1;
        location / {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
}

server{
        listen 80;
        server_name accounting-dashboard-dev.kp-para.cn;
        access_log /var/log/nginx/access/access-accounting-db-dev.log access;
	proxy_http_version 1.1;
        location / {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
}
server{
        listen 80;
        server_name blackboard-dev.kp-para.cn;
        access_log /var/log/nginx/access/a-blackboard-dev.log access;
        proxy_http_version 1.1;
        location / {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
}
server{
        listen 80;
        server_name customer-dashboard-dev.kp-para.cn;
        access_log /var/log/nginx/access/a-customer-dev.log access;
        proxy_http_version 1.1;
        location / {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
}
server{
        listen 80;
        server_name haqi-dev.kp-para.cn;
        access_log /var/log/nginx/access/a-haqi-dev.log access;
        proxy_http_version 1.1;
        location / {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
}
server{
        listen 443;
        server_name client-dev.kp-para.cn;
        access_log /var/log/nginx/access/a-client-dev.log access;

        ssl on;
        ssl_certificate /etc/nginx/ssl/client-dev.kp-para.cn_nginx/client-dev.kp-para.cn_bundle.crt;
        ssl_certificate_key /etc/nginx/ssl/client-dev.kp-para.cn_nginx/client-dev.kp-para.cn.key;

        ssl_session_timeout 5m;
        ssl_prefer_server_ciphers on;
        proxy_http_version 1.1;

        location = /MP_verify_NShWUEnPPMuxAuDf.txt {
                 root /usr/share/nginx/html;
                 index  MP_verify_NShWUEnPPMuxAuDf.txt;
        }
        location / {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
}

server{
        listen 80;

        server_name client-dev.kp-para.cn;
        access_log /var/log/nginx/access/a-client-dev.log access;
        proxy_http_version 1.1;

        location / {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
}

server{
        listen 80;
        listen 443;
           
        server_name macros-dev.kp-para.cn;
        access_log /var/log/nginx/access/a-macros-dev.log access;

        ssl on;
        ssl_certificate /etc/nginx/ssl/macros-dev.kp-para.cn_nginx/macros-dev.kp-para.cn_bundle.crt;
        ssl_certificate_key /etc/nginx/ssl/macros-dev.kp-para.cn_nginx/macros-dev.kp-para.cn.key;

        ssl_session_timeout 5m;
        ssl_prefer_server_ciphers on;
        proxy_http_version 1.1;
     
         location / {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
}
server{
        listen 80;
        listen 443;

        server_name adventure-dev.kp-para.cn;
        access_log /var/log/nginx/access/adventure-dev.log access;

        ssl on;
        ssl_certificate /etc/nginx/ssl/adventure-dev.kp-para.cn_nginx/adventure-dev.kp-para.cn_bundle.crt;
        ssl_certificate_key /etc/nginx/ssl/adventure-dev.kp-para.cn_nginx/adventure-dev.kp-para.cn.key;

        ssl_session_timeout 5m;
        ssl_prefer_server_ciphers on;
        proxy_http_version 1.1;

        location / {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
}

server{
        listen 80;
        server_name teacher-dev.kp-para.cn;
        access_log /var/log/nginx/access/teacher-dev.log access;
        proxy_http_version 1.1;
        location / {
                proxy_pass http://58.251.134.117:30936;
                include proxy_params;
        }
}
